<div class="action-toggle">
  <div class="container">
    <div class="click-to-section" id="click-to-section">
      <div class="click-buttons" id="click-buttons">
        <ul ontouchstart="handleTouchStart(event)" ontouchmove="handleTouchMove(event)">
          <li><a href="#ingredients" id="ingredient">Ingredients</a></li>
          <li><a href="#nutrition" id="nutri">Nutrition</a></li>
          <li><a href="#how-to-use" id="use">Why US</a></li>
          <li><a href="#us-v-them" id="compare">Us v tHem</a></li>
          <li><a href="#benefits" id="benefit">benefits</a></li>
          <li><a href="#faqs" id="faq">faqs</a></li>
        </ul>
      </div>
      <div class="back-top-top">
        <a href="#" class="primary-button yellow-black">back to top</a>
      </div>
    </div>
  </div>
</div>

<script>
  var screenWidth = window.innerWidth || document.documentElement.clientWidth;
  var top;

  $(document).ready(function() {
    if (screenWidth < 768) {
      $(".action-toggle").parent(".shopify-section").css({"position": "sticky", "top": "50px", "z-index": "989"});
    } else {
      $(".action-toggle").parent(".shopify-section").css({"position": "sticky", "top": "58px", "z-index": "989"});
    }
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const navLinks = document.querySelectorAll(".click-buttons a");

    navLinks.forEach(link => {
      link.addEventListener("click", function(e) {
        e.preventDefault();

        const targetId = this.getAttribute("href").substring(1); // Remove the "#" character
        const targetSection = document.getElementById(targetId);

        if (targetSection) {
          const offset = targetSection.offsetTop -(window.innerHeight * 0.15); // 20% above the section
          window.scrollTo({top: offset, behavior: "smooth"});
        }
      });
    });
  });
</script>
<script>
 var isScrollEnabled = true;

  function enableScroll() {
    if (window.innerWidth < 767) {
      isScrollEnabled = false;
      document.getElementById('click-to-section').style.overflowX = 'hidden';
    } else {
      isScrollEnabled = true;
      document.getElementById('click-to-section').style.overflowX = 'auto';
    }
  }

  function handleTouchStart(event) {
    if (isScrollEnabled) {
      var touch = event.touches[0];
      startX = touch.clientX;
      startY = touch.clientY;
    }
  }

  function handleTouchMove(event) {
    if (isScrollEnabled) {
      var touch = event.touches[0];
      var deltaX = startX - touch.clientX;
      var deltaY = startY - touch.clientY;

      if (Math.abs(deltaX) > Math.abs(deltaY)) {
        event.preventDefault(); // Prevent vertical scrolling
      }
    }
  }

  document.addEventListener('DOMContentLoaded', function () {
    enableScroll();

    window.addEventListener('scroll', function () {
      if (isScrollEnabled) {
        moveActiveToStart();
      }
    });

    function moveActiveToStart() {
      var activeButton = document.querySelector('.click-buttons a.active');
      if (activeButton) {
        var listItem = activeButton.parentElement;
        document.querySelector('.click-buttons ul').prepend(listItem);
      }
    }
  });
</script>